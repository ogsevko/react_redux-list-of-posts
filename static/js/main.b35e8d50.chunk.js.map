{"version":3,"sources":["store/loading.ts","store/message.ts","store/postsReducer.ts","store/query.ts","helpers/api.ts","store/index.ts","components/Start.tsx","components/CommentList.tsx","components/UserItem.tsx","components/PostItem.tsx","components/PostList.tsx","App.tsx","index.tsx"],"names":["reducer","loading","action","type","message","posts","payload","query","value","getData","API","fetch","then","response","json","rootReducer","combineReducers","loadingReducer","messageReducer","postsReducer","queryReducer","isLoading","state","getMessage","getPosts","getQuery","store","createStore","composeWithDevTools","applyMiddleware","thunk","Start","dispatch","useDispatch","useSelector","onClick","a","users","comments","disabled","CommentList","className","map","comment","key","id","name","body","email","UserItem","user","Object","values","address","slice","length","join","PostItem","post","title","PostsList","filteredPosts","preparedPosts","pattern","RegExp","filter","test","userCopy","find","userId","filteredComments","postId","App","onChange","event","target","setQuery","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b35e8d50.chunk.js","sourcesContent":["import { AnyAction } from 'redux';\n\n// Action types\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\n\n// Action creators\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = () => ({ type: FINISH_LOADING });\n\nconst reducer = (loading = false, action: AnyAction) => {\n  switch (action.type) {\n    case START_LOADING:\n      return true;\n\n    case FINISH_LOADING:\n      return false;\n\n    default:\n      return loading;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst SET_MESSAGE = 'SET_MESSAGE';\n\n// Action creators\nexport const setMessage = (message: string) => ({ type: SET_MESSAGE, message });\n\n// message reducer receives only the `state.message` part, but not the entire Redux state\nconst reducer = (message = '', action: AnyAction) => {\n  switch (action.type) {\n    case SET_MESSAGE:\n      return action.message;\n\n    default:\n      return message;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\nimport { Posts } from '../components/Interfaces';\n\nconst SET_POSTS = 'SET_POSTS';\n\nexport const setPosts = (payload: Posts) => ({ type: SET_POSTS, payload });\n\nconst reducer = (posts = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.payload;\n\n    default:\n      return posts;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\nconst SET_QUERY = 'SET_QUERY';\n\nexport const setQuery = (value: string) => ({ type: SET_QUERY, value });\n\nconst reducer = (query = '', action: AnyAction) => {\n  switch (action.type) {\n    case SET_QUERY:\n      return action.value;\n\n    default:\n      return query;\n  }\n};\n\nexport default reducer;\n","export function getData <T>(API: string): Promise<T[]> {\n  return fetch(API)\n    .then(response => response.json());\n}\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport { Dispatch } from 'react';\n\nimport loadingReducer, { finishLoading, startLoading } from './loading';\nimport messageReducer, { setMessage } from './message';\nimport postsReducer, { setPosts } from './postsReducer';\nimport queryReducer from './query';\nimport { Post, User, Comment } from '../components/Interfaces';\nimport { getData } from '../helpers/api';\n\nconst rootReducer = combineReducers({\n  loading: loadingReducer,\n  message: messageReducer,\n  posts: postsReducer,\n  query: queryReducer,\n});\n\nexport type RootState = ReturnType<typeof rootReducer>;\n\nexport const isLoading = (state: RootState) => state.loading;\nexport const getMessage = (state: RootState) => state.message;\nexport const getPosts = (state: RootState) => state.posts;\nexport const getQuery = (state: RootState) => state.query;\n\nconst API = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api/';\n\nexport const loadPosts = () => {\n  return async (dispatch: Dispatch<any>) => {\n    dispatch(startLoading());\n\n    try {\n      const posts: Post[] = await getData(`${API}posts.json`);\n      const users: User[] = await getData(`${API}users.json`);\n      const comments: Comment[] = await getData(`${API}comments.json`);\n\n      dispatch(setPosts({\n        posts,\n        users,\n        comments,\n      }));\n    } catch (error) {\n      dispatch(setMessage('Error occurred when loading data'));\n    }\n\n    dispatch(finishLoading());\n  };\n};\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk)),\n);\n\nexport default store;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { isLoading, loadPosts } from '../store';\n\nexport const Start = () => {\n  const dispatch = useDispatch();\n  const loading = useSelector(isLoading);\n\n  return (\n    <button\n      type=\"button\"\n      onClick={() => dispatch(loadPosts())}\n      disabled={loading}\n    >\n      {loading ? 'Loading...' : 'Load'}\n    </button>\n  );\n};\n","import React from 'react';\nimport { Comment } from './Interfaces';\n\ninterface Props {\n  comments: Comment[];\n}\n\nexport const CommentList: React.FC<Props> = ({ comments }) => (\n  <ul className=\"comment-list\">\n    <h3>Comments:</h3>\n    {\n      comments.map(comment => (\n        <li key={comment.id} className=\"comment-list__item\">\n          <h4>{comment.name}</h4>\n          <p>{comment.body}</p>\n          <span>{comment.email}</span>\n        </li>\n      ))\n    }\n  </ul>\n);\n","import React from 'react';\nimport { User } from './Interfaces';\n\ninterface Props {\n  user: User;\n}\n\nexport const UserItem: React.FC<Props> = ({ user }) => (\n  <div key={user.id} className=\"post__user\">\n    <span>{`${user.name} | `}</span>\n    <span>{`${user.email} | `}</span>\n    <span>\n      {\n        Object.values(user.address)\n          .slice(0, Object.values(user.address).length - 2)\n          .join(', ')\n      }\n    </span>\n  </div>\n);\n","import React from 'react';\nimport { User, Post, Comment } from './Interfaces';\nimport { CommentList } from './CommentList';\nimport { UserItem } from './UserItem';\n\ninterface Props {\n  comments: Comment[];\n  user: User;\n  post: Post;\n}\n\nexport const PostItem: React.FC<Props> = ({ comments, user, post }) => (\n  <li className=\"post\">\n    <h1>\n      {post.title}\n    </h1>\n    <p>\n      {post.body}\n    </p>\n    <UserItem user={user} />\n    <CommentList comments={comments} />\n  </li>\n);\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { getPosts, getQuery } from '../store';\nimport {\n  User, Post, Comment, Posts,\n} from './Interfaces';\nimport { PostItem } from './PostItem';\n\nexport const PostsList: React.FC = () => {\n  const preparedPosts: Posts = useSelector(getPosts);\n  const query: string = useSelector(getQuery);\n  let filteredPosts: Posts;\n\n  if (query !== '') {\n    const pattern = new RegExp(query, 'ig');\n\n    filteredPosts = {\n      posts: preparedPosts.posts\n        .filter((post: Post) => pattern.test(post.title) || pattern.test(post.body)),\n      users: [...preparedPosts.users],\n      comments: [...preparedPosts.comments],\n    };\n  } else {\n    filteredPosts = { ...preparedPosts };\n  }\n\n  return (\n    <ul className=\"post-list\">\n      {\n        filteredPosts.posts.map((post: Post) => {\n          const userCopy = preparedPosts.users\n            .find((user: User) => user.id === post.userId) as User;\n\n          const filteredComments = preparedPosts.comments\n            .filter((comment: Comment) => comment.postId === post.id);\n\n          return (\n            <PostItem\n              key={post.id}\n              comments={filteredComments}\n              user={userCopy}\n              post={post}\n            />\n          );\n        })\n      }\n    </ul>\n  );\n};\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport './App.scss';\nimport { Start } from './components/Start';\nimport {\n  isLoading, getMessage, getPosts, getQuery,\n} from './store';\nimport { PostsList } from './components/PostList';\nimport { setQuery } from './store/query';\n\nconst App = () => {\n  const dispatch = useDispatch();\n  const loading = useSelector(isLoading);\n  const message = useSelector(getMessage) || 'Ready!';\n  const preparedPosts = useSelector(getPosts);\n  const query = useSelector(getQuery);\n\n  const handleChange = (value: string) => {\n    dispatch(setQuery(value));\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Redux list of posts</h1>\n      <h2>{loading ? 'Loading...' : message}</h2>\n\n      {\n        preparedPosts.posts\n          ? (\n            <>\n              <span>Search:</span>\n              <input\n                type=\"text\"\n                value={query}\n                onChange={(event) => handleChange(event.target.value)}\n              />\n              <PostsList />\n            </>\n          )\n          : (\n            <Start />\n          )\n      }\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport store from './store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}